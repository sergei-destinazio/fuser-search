window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsload",e=>{window.isFuseListLoaded=!0},]),document.addEventListener("DOMContentLoaded",function(){var e,t;let l=document.querySelector('[data-fuse-element="input"]'),i=document.querySelector('[data-fuse-element="list"]'),a=Array.from(i.querySelectorAll(".w-dyn-item")),s=new Map,n=document.querySelector('[data-fuse-element="clear-button"]'),r=document.querySelector('[data-fuse-element="no-results"]'),o=document.querySelector('[data-fuse-element="initial-element"]'),u=1,c=document.querySelector('[data-fuse-element="pagination"]'),d=c?+c.getAttribute("data-fuse-items-per-page"):10,f=document.querySelector('[data-fuse-element="pagination-page-buttons"]'),m=document.querySelector('[data-fuse-element="prev"]'),h=document.querySelector('[data-fuse-element="next"]'),y=document.querySelector('[data-fuse-element="excerpt-source"]'),p;y&&(p=y.getAttribute("data-fuse-field")),n&&n.addEventListener("click",()=>{l.value="",u=1,q()});let g=[];a.length>0&&a[0].querySelectorAll("[data-fuse-field]").forEach(e=>{g.push(e.getAttribute("data-fuse-field"))}),r&&(r.style.display="none"),o&&(i.style.display="none"),o&&c&&(c.style.display="none"),document.querySelectorAll("[fuse-initial-state=”true”]").forEach(e=>{e.removeAttribute("fuse-initial-state=”true”")});let v=b();function b(){return(a=Array.from(i.querySelectorAll(".w-dyn-item"))).map(e=>{let t=e.getAttribute("data-fuse-id"),l={id:t};return g.forEach(t=>{let i=e.querySelector(`[data-fuse-field="${t}"]`),a=i?i.innerText.trim():"";l[t]=a}),s.set(t,e),l})}let L=setInterval(()=>{v=b(),S.setCollection(v),(l.value||c)&&q(),window.isFuseListLoaded&&clearInterval(L),i.querySelectorAll("[data-fuse-item]").forEach(e=>{e.removeAttribute("data-fuse-item")})},1e3),S=new Fuse(v,{keys:(e=g).map(e=>({name:e,weight:+document.querySelector(`[data-fuse-field="${e}"]`)?.getAttribute("data-fuse-weight")||1})),threshold:.4,distance:100,ignoreLocation:!0,includeMatches:!0,includeScore:!0});function _(e,t){let l=t.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=RegExp(`(${l.join("|")})`,"gi");return e.replace(i,"<span data-fuse-highlight>$1</span>")}function $(e,t){let l=e.toLowerCase(),i=-1,a="";for(let s of t){let n=l.indexOf(s.toLowerCase());if(-1!==n){i=n,a=s;break}}if(-1===i&&t.length)for(let r of t){let o=r.slice(0,3),u=RegExp(o,"i"),c=e.match(u);if(c&&void 0!==c.index){i=c.index,a=c[0];break}}let d="";if(-1!==i){let f=Math.max(0,i-40),m=Math.min(e.length,i+40);d=e.slice(f,m),f>0&&(d="..."+d),m<e.length&&(d+="...")}else d=e.slice(0,80),e.length>80&&(d+="...");return _(d,t)}let A="title",E;function q(){let e=l.value.trim();if(a.forEach(t=>{""===e?(t.removeAttribute("style"),t.classList.remove("is-fuse-visible")):(t.style.display="none",t.classList.remove("is-fuse-visible"))}),o&&""===e){i.style.display="none",r&&(r.style.display="none"),o.removeAttribute("style"),c&&(c.style.display="none");return}let t=function e(t){let l=new Set(["a","an","the","is","of","in","at","on","to","for","with","and","or","does","how","what","can","do"]),i=t.trim().toLowerCase().split(/\s+/).filter(e=>e.length>2&&!l.has(e)),a=new Map,s=S.search(t);s.forEach(e=>{let t=e.item.id;a.set(t,{item:e.item,scoreSum:e.score,count:1,fullMatch:!0,matchedWords:new Set,matchedInTitle:!1})}),i.forEach(e=>{let t=S.search(e);t.forEach(t=>{let l=t.item.id;a.has(l)||a.set(l,{item:t.item,scoreSum:0,count:0,fullMatch:!1,matchedWords:new Set,matchedInTitle:!1});let i=a.get(l);i.scoreSum+=t.score,i.count+=1,i.matchedWords.add(e),g.includes(A)&&t.item[A]?.toLowerCase().includes(e)&&(i.matchedInTitle=!0)})});let n=Array.from(a.values()).filter(e=>{let l=JSON.stringify(e.item).toLowerCase(),i=t.trim().toLowerCase().split(/\s+/),a=i.some(e=>e.length>=4);return i.some(e=>!!a||RegExp(`\\b${e}\\b`).test(l))});return n.map(e=>({item:e.item,averageScore:e.scoreSum/e.count,fullMatch:e.fullMatch,matchedCount:e.matchedWords.size,matchedInTitle:e.matchedInTitle})).sort((e,t)=>e.matchedInTitle&&!t.matchedInTitle?-1:!e.matchedInTitle&&t.matchedInTitle?1:t.matchedCount!==e.matchedCount?t.matchedCount-e.matchedCount:e.fullMatch&&!t.fullMatch?-1:!e.fullMatch&&t.fullMatch?1:e.averageScore-t.averageScore)}(e),n=e.toLowerCase().split(/\s+/).filter(e=>e.length>2);if(r&&""!==e&&!t.length){i.style.display="none",o&&(o.style.display="none"),r.removeAttribute("style"),c&&(c.style.display="none");return}r&&(r.style.display="none"),o&&(o.style.display="none"),i.removeAttribute("style"),c?t.length?function e(t,l){let n=Math.ceil(t.length/d),r=(u-1)*d,o=t.slice(r,r+d);a.forEach(e=>{e.style.display="none",e.classList.remove("is-fuse-visible")}),c.removeAttribute("style"),o.length&&o.forEach(e=>{let t=s.get(e.item.id);if(t){if(t.style.display="",t.classList.add("is-fuse-visible"),g.forEach(i=>{let a=t.querySelector(`[data-fuse-field="${i}"]`);a&&(a.innerHTML=_(e.item[i],l))}),p){let a=t.querySelector('[data-fuse-element="excerpt-container"]');a&&(a.innerHTML=`<p>${$(e.item[p],l)}</p>`)}i.appendChild(t)}}),w(n)}(t,n):function e(){let t=Math.ceil(v.length/d),l=(u-1)*d,n=v.slice(l,l+d);a.forEach(e=>{e.style.display="none",e.classList.remove("is-fuse-visible")}),c.removeAttribute("style"),n.forEach(e=>{let t=s.get(e.id);if(t){if(t.style.display="",t.classList.add("is-fuse-visible"),i.querySelectorAll("[data-fuse-highlight]").forEach(e=>e.removeAttribute("data-fuse-highlight")),p){let l=t.querySelector('[data-fuse-element="excerpt-container"]');l&&(l.innerHTML="")}i.appendChild(t)}}),w(t)}():e?function e(t,l){t.forEach(e=>{let t=s.get(e.item.id);if(t){if(t.removeAttribute("style"),t.classList.add("is-fuse-visible"),g.forEach(i=>{let a=t.querySelector(`[data-fuse-field="${i}"]`);a&&(a.innerHTML=_(e.item[i],l))}),p){let a=t.querySelector('[data-fuse-element="excerpt-container"]');a&&(a.innerHTML=`<p>${$(e.item[p],l)}</p>`)}i.appendChild(t)}})}(t,n):v.forEach(e=>{let t=s.get(e.id);if(t){if(i.querySelectorAll("[data-fuse-highlight]").forEach(e=>e.removeAttribute("data-fuse-highlight")),p){let l=t.querySelector('[data-fuse-element="excerpt-container"]');l&&(l.innerHTML="")}i.appendChild(t)}})}function C(){let e=document.createElement("div");e.textContent="...",e.classList.add("fuse-page-dots"),f.appendChild(e)}function w(e){if(u===e?h.style.display="none":h.removeAttribute("style"),1===u?m.style.display="none":m.removeAttribute("style"),c){f.innerHTML="";for(let t=1;t<=e;t++){let l=document.createElement("button");l.textContent=t,l.classList.add("fuse-page-button"),t===u&&l.classList.add("is-fuse-current"),l.addEventListener("click",()=>{u=t,q()}),(1===t||t===e||t===u||3===u&&2===t||1===u&&(2===t||3===t)||2===u&&3===t||u===e&&(t===e-1||t===e-2)||u===e-1&&t===e-2||u===e-2&&t===e-1)&&f.appendChild(l),(u>3&&1===t||u<e-2&&t===e-1)&&e>4&&C()}}}l.addEventListener("input",(t=q,function(...e){u=1,clearTimeout(E),E=setTimeout(()=>t.apply(this,e),400)})),m&&h&&(h.addEventListener("click",()=>{u++,q()}),m.addEventListener("click",()=>{u--,q()})),l.closest("form").addEventListener("submit",e=>{e.stopPropagation(),e.preventDefault()})});